import{c as i,u as E,j as e}from"./index-Bnma9bT1.js";import{r as o}from"./vendor-DiiPbxpF.js";import{F as b,D as y}from"./file-text-CbGoycBZ.js";import"./router-Cc-_B42c.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=i("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=i("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=i("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=i("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=i("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=i("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=i("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=i("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=i("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=i("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),R={},_=R.VITE_API_BASE_URL||"http://localhost:5000/api";class S extends Error{constructor(a,r){super(r),this.status=a,this.name="ApiError"}}async function n(t,a={}){const r=`${_}${t}`,h={"Content-Type":"application/json"},d=localStorage.getItem("authToken");d&&(h.Authorization=`Bearer ${d}`);try{const c=await fetch(r,{...a,headers:{...h,...a.headers}});if(!c.ok){const m=await c.json().catch(()=>({}));throw new S(c.status,m.message||`HTTP ${c.status}: ${c.statusText}`)}const l=await c.text();return l?JSON.parse(l):{}}catch(c){throw c instanceof S?c:new S(0,c instanceof Error?c.message:"Network error")}}const C={async getDatabaseStats(){return n("/admin/database-stats")},async getSampleDataStatus(){return n("/admin/sample-data-status")},async seedSampleData(){return n("/admin/seed-sample-data",{method:"POST"})},async clearAllData(t){return n(`/admin/clear-all-data?confirmationToken=${t}`,{method:"DELETE"})},async createAdminUser(t){return n("/admin/create-admin-user",{method:"POST",body:JSON.stringify(t)})}},I={async getDocuments(t){const a=new URLSearchParams;t?.page&&a.append("page",t.page.toString()),t?.pageSize&&a.append("pageSize",t.pageSize.toString()),t?.searchTerm&&a.append("searchTerm",t.searchTerm),t?.tenantId&&a.append("tenantId",t.tenantId);const r=a.toString();return n(`/documents${r?`?${r}`:""}`)},async getDocument(t){return n(`/documents/${t}`)},async createDocument(t){return n("/documents",{method:"POST",body:JSON.stringify(t)})},async updateDocument(t,a){return n(`/documents/${t}`,{method:"PUT",body:JSON.stringify(a)})},async deleteDocument(t){return n(`/documents/${t}`,{method:"DELETE"})}},L={async getCurrentUser(){return n("/users/me")},async updateProfile(t){return n("/users/me",{method:"PUT",body:JSON.stringify(t)})},async getUsers(){return n("/users")}},q={async login(t){return n("/auth/login",{method:"POST",body:JSON.stringify(t)})},async register(t){return n("/auth/register",{method:"POST",body:JSON.stringify(t)})},async logout(){return n("/auth/logout",{method:"POST"})},async refreshToken(){return n("/auth/refresh",{method:"POST"})}},F={async check(){return n("/health")}},D={admin:C,documents:I,users:L,auth:q,health:F};function W(){const{user:t}=E(),[a,r]=o.useState(null),[h,d]=o.useState([]),[c,l]=o.useState(!0),[m,p]=o.useState(null),[j,A]=o.useState(!1);o.useEffect(()=>{g()},[]);const g=async()=>{try{l(!0),p(null);const[s,u]=await Promise.all([D.admin.getDatabaseStats(),D.admin.getSampleDataStatus()]);A(u.hasSampleData);const v={totalDocuments:s.totalDocuments,totalUsers:s.totalUsers,totalTenants:s.totalTenants,activeProjects:Math.floor(s.totalDocuments/3),databaseSize:s.databaseSize,systemHealth:s.systemHealth};r(v);const N=[{id:"documents",title:"Total Documents",value:s.totalDocuments,change:18.2,changeType:"positive",icon:e.jsx(b,{size:24}),color:"primary",description:"Documents across all tenants"},{id:"users",title:"Active Users",value:s.totalUsers,change:12.5,changeType:"positive",icon:e.jsx(f,{size:24}),color:"success",description:"Registered platform users"},{id:"tenants",title:"Organizations",value:s.totalTenants,change:5.1,changeType:"positive",icon:e.jsx(x,{size:24}),color:"warning",description:"Multi-tenant organizations"},{id:"storage",title:"Database Size",value:s.databaseSize,icon:e.jsx(T,{size:24}),color:"info",description:"Total database storage used"}];d(N)}catch(s){console.error("Failed to fetch dashboard data:",s),p(s instanceof Error?s.message:"Failed to load dashboard data"),d([{id:"documents",title:"Total Documents",value:"-",icon:e.jsx(b,{size:24}),color:"primary"},{id:"users",title:"Active Users",value:"-",icon:e.jsx(f,{size:24}),color:"success"},{id:"tenants",title:"Organizations",value:"-",icon:e.jsx(x,{size:24}),color:"warning"},{id:"storage",title:"Database Size",value:"-",icon:e.jsx(T,{size:24}),color:"info"}])}finally{l(!1)}},k=async()=>{try{l(!0),await D.admin.seedSampleData(),await g()}catch(s){console.error("Failed to seed data:",s),p(s instanceof Error?s.message:"Failed to seed sample data")}finally{l(!1)}},P=(s,u)=>{if(!s)return null;const v=s>0?H:O,N=u==="positive"?"metric-change-positive":u==="negative"?"metric-change-negative":"metric-change-neutral";return e.jsxs("div",{className:`metric-change ${N}`,children:[e.jsx(v,{size:16}),e.jsxs("span",{children:[Math.abs(s),"%"]})]})};return c?e.jsx("div",{className:"dashboard",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner",children:e.jsx(z,{className:"animate-spin",size:48})}),e.jsx("p",{className:"loading-text",children:"Loading dashboard data..."})]})}):e.jsxs("div",{className:"dashboard",children:[m&&e.jsxs("div",{className:"alert alert-error",children:[e.jsx(U,{size:20}),e.jsx("span",{children:m}),e.jsx("button",{onClick:g,className:"btn btn-sm",children:"Retry"})]}),e.jsx("section",{className:"dashboard-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"dashboard-title",children:["Welcome back, ",t?.firstName||"User"]}),e.jsx("p",{className:"dashboard-subtitle",children:j?"Here's what's happening with your documents today.":"Get started by seeding sample data or creating your first document."})]}),e.jsxs("div",{className:"header-actions",children:[!j&&e.jsxs("button",{className:"btn btn-secondary",onClick:k,children:[e.jsx(y,{size:20}),"Seed Sample Data"]}),e.jsxs("button",{className:"btn btn-secondary",children:[e.jsx(M,{size:20}),"Export Report"]}),e.jsxs("button",{className:"btn btn-primary",children:[e.jsx(w,{size:20}),"New Document"]})]})]})}),a&&e.jsx("section",{className:"health-section",children:e.jsxs("div",{className:"health-status card",children:[e.jsx("h3",{className:"health-title",children:"System Status"}),e.jsxs("div",{className:"health-indicators",children:[e.jsxs("div",{className:`health-item ${a.systemHealth.database?"healthy":"unhealthy"}`,children:[e.jsx(y,{size:16}),e.jsx("span",{children:"Database"}),e.jsx("span",{className:"status-dot"})]}),e.jsxs("div",{className:`health-item ${a.systemHealth.redis?"healthy":"unhealthy"}`,children:[e.jsx(x,{size:16}),e.jsx("span",{children:"Cache"}),e.jsx("span",{className:"status-dot"})]}),e.jsxs("div",{className:`health-item ${a.systemHealth.elasticsearch?"healthy":"unhealthy"}`,children:[e.jsx(z,{size:16}),e.jsx("span",{children:"Search"}),e.jsx("span",{className:"status-dot"})]})]})]})}),e.jsx("section",{className:"metrics-section",children:e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4",children:h.map(s=>e.jsxs("div",{className:"metric-card card",children:[e.jsxs("div",{className:"metric-header",children:[e.jsx("div",{className:`metric-icon metric-icon-${s.color}`,children:s.icon}),P(s.change,s.changeType)]}),e.jsxs("div",{className:"metric-content",children:[e.jsx("h3",{className:"metric-value",children:s.value}),e.jsx("p",{className:"metric-title",children:s.title}),s.description&&e.jsx("p",{className:"metric-description",children:s.description})]})]},s.id))})}),a&&e.jsxs("section",{className:"stats-section",children:[e.jsx("h2",{className:"section-title",children:"Platform Overview"}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(b,{size:20})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("p",{className:"stat-value",children:a.totalDocuments}),e.jsx("p",{className:"stat-label",children:"Total Documents"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(f,{size:20})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("p",{className:"stat-value",children:a.totalUsers}),e.jsx("p",{className:"stat-label",children:"Platform Users"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:e.jsx($,{size:20})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("p",{className:"stat-value",children:a.activeProjects}),e.jsx("p",{className:"stat-label",children:"Active Projects"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(x,{size:20})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("p",{className:"stat-value",children:a.totalTenants}),e.jsx("p",{className:"stat-label",children:"Organizations"})]})]})]})]}),!j&&!c&&e.jsx("section",{className:"empty-state",children:e.jsxs("div",{className:"empty-state-content card",children:[e.jsx(y,{size:48,className:"empty-state-icon"}),e.jsx("h3",{className:"empty-state-title",children:"No Data Available"}),e.jsx("p",{className:"empty-state-text",children:"Your database is empty. Seed sample data to see the dashboard in action, or start creating documents to populate your platform."}),e.jsxs("div",{className:"empty-state-actions",children:[e.jsxs("button",{className:"btn btn-primary",onClick:k,children:[e.jsx(y,{size:20}),"Seed Sample Data"]}),e.jsxs("button",{className:"btn btn-secondary",children:[e.jsx(w,{size:20}),"Create First Document"]})]})]})})]})}export{W as default};
