import{c as M,u as U,_ as D,j as e}from"./index-DkHF2ZzG.js";import{r as t}from"./vendor-DiiPbxpF.js";import{A as $}from"./dashboard-GOOrcU3e.js";import{A as p}from"./activity-DY7-DzCM.js";import{P as E}from"./plus-DrPwpC86.js";import{S as I,a as V}from"./shield-CZtWNgHf.js";import{B as _}from"./bar-chart-3-BcoIE_X8.js";import{S as F,E as B}from"./search-Djnu_hNM.js";import{B as g}from"./building-2-DvSXfUZ6.js";import{D as H}from"./dollar-sign-spJTcxY7.js";import{U as O}from"./users-HqlCiR7E.js";import"./router-Cc-_B42c.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u=M("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function ae(){const{user:j}=U(),[l,f]=t.useState(null),[v,b]=t.useState([]),[y,c]=t.useState(!0),[d,m]=t.useState(null),[N]=t.useState("30d"),[i,C]=t.useState(""),[r,w]=t.useState("all");t.useEffect(()=>{x()},[N]);const x=async()=>{try{c(!0),m(null);const{platformAdminApi:s}=await D(async()=>{const{platformAdminApi:o}=await import("./api-DSWGjQU1.js");return{platformAdminApi:o}},[]),[a,n]=await Promise.all([s.getPlatformMetrics(),s.getClients()]);f(a),b(n)}catch(s){console.error("Failed to fetch platform admin data:",s),m(s instanceof Error?s.message:"Failed to load platform data")}finally{c(!1)}},S=()=>l?[{id:"total-clients",title:"Total Clients",value:l.totalClients,change:12.5,changeType:"positive",icon:e.jsx(g,{size:24}),color:"primary",description:"Active client organizations",actionLabel:"Add Client",actionCallback:()=>h()},{id:"monthly-revenue",title:"Monthly Recurring Revenue",value:`$${(l.monthlyRecurringRevenue/1e3).toFixed(0)}K`,change:8.3,changeType:"positive",icon:e.jsx(H,{size:24}),color:"success",description:"Platform MRR",actionLabel:"View Details",actionCallback:()=>A()},{id:"total-users",title:"Platform Users",value:l.totalUsers.toLocaleString(),change:15.7,changeType:"positive",icon:e.jsx(O,{size:24}),color:"info",description:"Users across all clients",actionLabel:"User Analytics",actionCallback:()=>L()},{id:"system-health",title:"System Health",value:`${l.platformHealth.systemUptime}%`,change:.02,changeType:"positive",icon:e.jsx(p,{size:24}),color:"warning",description:"Platform uptime",actionLabel:"Monitor",actionCallback:()=>z()}]:[],h=()=>{console.log("Add new client organization")},A=()=>{console.log("View revenue analytics")},L=()=>{console.log("View user analytics")},z=()=>{console.log("View system health monitoring")},k=s=>{console.log(`Impersonate user in client: ${s}`)},T=s=>{console.log(`Manage client: ${s}`)},P=v.filter(s=>{const a=s.name.toLowerCase().includes(i.toLowerCase())||s.subdomain.toLowerCase().includes(i.toLowerCase()),n=r==="all"||s.status.toLowerCase()===r.toLowerCase();return a&&n}),R=(s,a)=>{const n=(s>0,u),o=a==="positive"?"text-green-600":a==="negative"?"text-red-600":"text-gray-600";return e.jsxs("div",{className:`flex items-center space-x-1 ${o}`,children:[e.jsx(n,{size:14}),e.jsxs("span",{className:"text-sm font-medium",children:[Math.abs(s),"%"]})]})};return y?e.jsx("div",{className:"dashboard",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner",children:e.jsx(p,{className:"animate-spin",size:48})}),e.jsx("p",{className:"loading-text",children:"Loading platform administration data..."})]})}):e.jsxs("div",{className:"platform-admin-dashboard",children:[d&&e.jsxs("div",{className:"alert alert-error mb-6",children:[e.jsx($,{size:20}),e.jsx("span",{children:d}),e.jsx("button",{onClick:x,className:"btn btn-sm",children:"Retry"})]}),e.jsx("section",{className:"dashboard-header mb-8",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Platform Administration"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Comprehensive oversight of the Spaghetti documentation platform"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Welcome back, ",j?.firstName||"Platform Admin"," • Last updated: ",new Date().toLocaleString()]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:h,className:"btn btn-primary flex items-center space-x-2",children:[e.jsx(E,{size:16}),e.jsx("span",{children:"Add Client"})]}),e.jsxs("button",{className:"btn btn-secondary flex items-center space-x-2",children:[e.jsx(I,{size:16}),e.jsx("span",{children:"Impersonate"})]}),e.jsxs("button",{className:"btn btn-secondary flex items-center space-x-2",children:[e.jsx(_,{size:16}),e.jsx("span",{children:"Analytics"})]})]})]})}),e.jsx("section",{className:"metrics-overview mb-8",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:S().map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`p-3 rounded-lg bg-${s.color}-100`,children:e.jsx("div",{className:`text-${s.color}-600`,children:s.icon})}),s.change&&R(s.change,s.changeType)]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.value}),e.jsx("p",{className:"text-sm text-gray-600",children:s.title}),s.description&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.description})]}),s.actionCallback&&e.jsxs("button",{onClick:s.actionCallback,className:"mt-4 text-sm text-blue-600 hover:text-blue-800 font-medium",children:[s.actionLabel," →"]})]},s.id))})}),e.jsx("section",{className:"client-management",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Client Organizations"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Manage and monitor all client organizations"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(F,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search clients...",value:i,onChange:s=>C(s.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:r,onChange:s=>w(s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Clients"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"trial",children:"Trial"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})]})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:P.map(s=>e.jsx("div",{className:"p-6 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(g,{size:24,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.subdomain,".spaghetti.app"]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${s.status==="Active"?"bg-green-100 text-green-800":s.status==="Trial"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status}),e.jsx("span",{className:"text-xs text-gray-500",children:s.tier})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.userCount}),e.jsx("p",{className:"text-xs text-gray-600",children:"Users"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.documentCount.toLocaleString()}),e.jsx("p",{className:"text-xs text-gray-600",children:"Documents"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",s.monthlyRevenue>0?s.monthlyRevenue.toLocaleString():"Trial"]}),e.jsx("p",{className:"text-xs text-gray-600",children:"Monthly"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>k(s.id),className:"p-2 text-gray-400 hover:text-blue-600",title:"Impersonate user",children:e.jsx(B,{size:16})}),e.jsx("button",{onClick:()=>T(s.id),className:"p-2 text-gray-400 hover:text-gray-600",title:"Manage client",children:e.jsx(V,{size:16})})]})]})]})},s.id))})]})})]})}export{ae as default};
